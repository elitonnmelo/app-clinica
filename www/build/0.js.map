{"version":3,"sources":["../../src/pages/configuracoes/configuracoes.module.ts","../../src/pages/configuracoes/configuracoes.ts","../../src/models/user.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACI;AAUpD;IAAA;IAAsC,CAAC;IAA1B,uBAAuB;QARnC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,yEAAiB;aAClB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,yEAAiB,CAAC;aAC5C;SACF,CAAC;OACW,uBAAuB,CAAG;IAAD,8BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;ACZiB;AACwD;AACpD;AAChB;AACmD;AAC/B;AAQ7D;IAME,2BACS,OAAsB,EACtB,SAAoB,EACpB,YAA0B,EAC1B,uBAAgD,EAChD,WAA8B,EAC7B,MAAc,EACf,QAAkB,EAClB,eAAsC;QAPtC,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChD,gBAAW,GAAX,WAAW,CAAmB;QAC7B,WAAM,GAAN,MAAM,CAAQ;QACf,aAAQ,GAAR,QAAQ,CAAU;QAClB,oBAAe,GAAf,eAAe,CAAuB;QAX/C,SAAI,GAAG,IAAI,0DAAI,EAAE,CAAC;QAClB,SAAI,GAAG,4BAA4B;QACnC,eAAU,GAAG,KAAK,CAAC;IAWnB,CAAC;IAED,0CAAc,GAAd;QAAA,iBA6BC;QA3BC,0CAA0C;QAC1C,yBAAyB;QAC1B,MAAM;QACL,mBAAmB;QACnB,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC;QAEhD,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,iBAAO;YACvC,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YAChC,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,eAAK;gBAC7C,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;gBAC9B,KAAI,CAAC,IAAI,GAAG,IAAI,0DAAI,EAAE,CAAC;gBACvB,KAAI,CAAC,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC;gBACvB,KAAI,CAAC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;gBAC/B,KAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC;gBACjC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBACvB,IAAM,IAAI,GAAG,QAAQ,GAAG,KAAI,CAAC,IAAI,CAAC,EAAE,GAAG,WAAW,CAAC;gBACnD,KAAI,CAAC,uBAAuB,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,eAAK;oBAChE,KAAI,CAAC,IAAI,GAAG,KAAK,CAAC;oBAClB,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;oBAEvB,mBAAmB;gBACrB,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK;oBACZ,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC,KAAK,CAAC,CAAC;gBAC5B,CAAC,CAAC;YACJ,CAAC,CAAC;QACJ,CAAC,CAAC;IAEJ,CAAC;IACD,kCAAM,GAAN;QACE,EAAE,EAAC,IAAI,CAAC,UAAU,CAAC,EAAC;YAClB,IAAI,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,WAAW,CAAC,CAAC;QACpG,CAAC;IAEH,CAAC;IACD,wCAAY,GAAZ;QACE,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QAC7C,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAEhC,EAAE,EAAC,QAAQ,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;IACD,yCAAa,GAAb;QACE,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;IAC3C,CAAC;IAED,wCAAY,GAAZ;QACE,IAAM,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC9C,KAAK,EAAE,WAAW;YAClB,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,aAAa;oBACnB,OAAO,EAAE;wBACR,sBAAsB;oBACvB,CAAC;iBACF,EAAC;oBACA,IAAI,EAAE,SAAS;oBACf,OAAO,EAAE;wBACP,sBAAsB;oBACxB,CAAC;iBACF,EAAC;oBACA,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAChC,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QACH,WAAW,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAEO,uCAAW,GAAnB;QACE,IAAM,OAAO,GAAkB;YAC7B,OAAO,EAAE,EAAE;YACX,yDAAyD;YACzD,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ;YACrD,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI;YAC3C,SAAS,EAAE,KAAK;YAChB,YAAY,EAAE,GAAG;YACjB,WAAW,EAAE,GAAG;YAEhB,SAAS;YACT,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM;YAChD,gBAAgB,EAAE,IAAI;YACtB,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK;YAC5C,kBAAkB,EAAE,IAAI;SACzB;QAED,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;IAC/B,CAAC;IAEO,wCAAY,GAApB;QACE,IAAM,OAAO,GAAkB;YAC7B,OAAO,EAAE,EAAE;YACX,yDAAyD;YACzD,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ;YACrD,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI;YAC3C,SAAS,EAAE,KAAK;YAChB,YAAY,EAAE,GAAG;YACjB,WAAW,EAAE,GAAG;YAEhB,UAAU;YACV,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO;YACxC,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,YAAY;YACtD,kBAAkB,EAAE,IAAI;SACzB;QAED,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;IAC/B,CAAC;IAEO,0CAAc,GAAtB,UAAuB,OAAO;QAA9B,iBAWC;QAVC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;YAC7C,IAAI,WAAW,GAAG,yBAAyB,GAAG,SAAS,CAAC;YACxD,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC;YAElC,KAAI,CAAC,IAAI,GAAG,WAAW,CAAC;YACxB,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAExB,CAAC,EAAE,UAAC,GAAG;YACN,eAAe;QAChB,CAAC,CAAC,CAAC;IACN,CAAC;IACD,2CAAe,GAAf,UAAgB,MAAM;QAAtB,iBAKC;QAJC,IAAI,CAAC,uBAAuB,CAAC,eAAe,CAAC,MAAM,EAAE,UAAC,WAAW,EAAE,CAAC,EAAE,CAAC;YACrE,KAAI,CAAC,IAAI,GAAG,WAAW,CAAC;YACxB,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACzB,CAAC,CAAC,CAAC;IACL,CAAC;IAtJ2B;QAA3B,yEAAS,CAAC,eAAe,CAAC;;4DAAe;IAD/B,iBAAiB;QAJ7B,wEAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;WACG;SAClC,CAAC;6EAQ+B;YACX,0EAAS;YACN,6GAAY;YACD,yEAAuB;YACnC,qEAAiB;YACrB,+DAAM;YACL,4EAAQ;YACD,cAAqB;OAdpC,iBAAiB,CAyJ7B;IAAD,CAAC;AAAA;SAzJY,iBAAiB,e;;;;;;;;ACb9B;AAAA;IAAA;QACI,UAAK,GAAW,EAAE,CAAC;QACnB,SAAI,GAAW,EAAE,CAAC;QAClB,OAAE,GAAW,EAAE,CAAC;IAChB,CAAC;IAAD,WAAC;AAAD,CAAC","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ConfiguracoesPage } from './configuracoes';\n\n@NgModule({\n  declarations: [\n    ConfiguracoesPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ConfiguracoesPage),\n  ],\n})\nexport class ConfiguracoesPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/configuracoes/configuracoes.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { ActionSheetController, IonicPage, LoadingController, NavController, NavParams, Platform } from 'ionic-angular';\nimport { UserProvider } from '../../providers/user/user';\nimport { User } from '../../models/user';\nimport { FirebaseStorageProvider } from '../../providers/firebase-storage/firebase-storage';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-configuracoes',\n  templateUrl: 'configuracoes.html',\n})\nexport class ConfiguracoesPage {\n  @ViewChild('fileUserPhoto') fileUserPhoto;\n  \n  item = new User();\n  foto = '../../assets/imgs/user.png'\n  isUploaded = false;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public userProvider: UserProvider,\n    public firebaseStorageProvider: FirebaseStorageProvider,\n    public loadingCtrl: LoadingController ,\n    private camera: Camera,\n    public platform: Platform,\n    public actionSheetCtrl: ActionSheetController\n    ) {\n  }\n\n  ionViewDidLoad() {\n\n    //const loader = this.loadingCtrl.create({\n    //  content: \"Aguarde...\"\n   // });\n    //loader.present();\n    console.log('ionViewDidLoad ConfiguracoesPage');\n\n    this.userProvider.lerLocal().then(_userId => {\n      console.log('teste 0', _userId);\n      this.userProvider.byId(_userId).subscribe(_user => {\n        console.log('teste 3', _user);\n        this.item = new User();\n        this.item.id = _userId;\n        this.item.nome = _user['nome'];\n        this.item.email = _user['email'];\n        console.log('teste 1');\n        const path = '/user/' + this.item.id + '/foto.jpg';\n        this.firebaseStorageProvider.downloadImageStorage(path).then(_data => {\n          this.foto = _data;\n          console.log('teste 2');\n\n          //loader.dismiss();\n        }).catch(error => {\n          console.log('erro',error);\n        })\n      })\n    })\n    \n  }\n  salvar() {\n    if(this.isUploaded){\n      this.firebaseStorageProvider.uploadImageStorage(this.foto, '/user/' + this.item.id + '/foto.jpg');\n    }\n    \n  }\n  escolherFoto() {\n    const isMobile = this.platform.is('cordova');\n    console.log('mobile', isMobile);\n    \n    if(isMobile) {\n      this.abrirCelular();\n    } else {\n      this.abrirArquivos();\n    }\n  }\n  abrirArquivos() {\n    this.fileUserPhoto.nativeElement.click();\n  }\n\n  abrirCelular() {\n    const actionSheet = this.actionSheetCtrl.create({\n      title: 'Selecione',\n      buttons: [\n        {\n          text: 'CÃ¢mera',\n          role: 'destructive',\n          handler: () => {\n           // this.abrirCamera();\n          }\n        },{\n          text: 'Galeria',\n          handler: () => {\n            //this.abrirGaleria();\n          }\n        },{\n          text: 'Cancelar',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        }\n      ]\n    });\n    actionSheet.present();\n  }\n    \n  private abrirCamera() {\n    const options: CameraOptions = {\n      quality: 50,\n      // destinationType: this.camera.DestinationType.FILE_URI,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      allowEdit: false,\n      targetHeight: 350,\n      targetWidth: 350,\n      \n      // CAMERA\n      sourceType: this.camera.PictureSourceType.CAMERA,\n      saveToPhotoAlbum: true,\n      cameraDirection: this.camera.Direction.FRONT,\n      correctOrientation: true,\n    }\n\n    this.carregarImagem(options);\n  }\n\n  private abrirGaleria() {\n    const options: CameraOptions = {\n      quality: 50,\n      // destinationType: this.camera.DestinationType.FILE_URI,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      allowEdit: false,\n      targetHeight: 350,\n      targetWidth: 350,\n      \n      // GALERIA\n      mediaType: this.camera.MediaType.PICTURE,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      correctOrientation: true,\n    }\n\n    this.carregarImagem(options);\n  }\n\n  private carregarImagem(options) {\n    this.camera.getPicture(options).then((imageData) => {\n      let base64Image = 'data:image/jpeg;base64,' + imageData;\n      console.log('base64', base64Image)\n\n      this.foto = base64Image;\n      this.isUploaded = true;\n\n     }, (err) => {\n      // Handle error\n     });\n  }\n  processWebImage($event){\n    this.firebaseStorageProvider.processWebImage($event, (imageBase64, w, h) => {\n      this.foto = imageBase64;\n      this.isUploaded = true;\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/configuracoes/configuracoes.ts","export class User{\r\n    email: string = '';\r\n    nome: string = '';\r\n    id: string = '';\r\n    }\n\n\n// WEBPACK FOOTER //\n// ./src/models/user.ts"],"sourceRoot":""}